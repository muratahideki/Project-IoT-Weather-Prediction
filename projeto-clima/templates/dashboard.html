<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>EstaÃ§Ã£o MeteorolÃ³gica</title>

    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">


    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <h1>â›… EstaÃ§Ã£o MeteorolÃ³gica Inteligente</h1>
    <div class="grid"> 
        <div class="card ia-card" style="background-color: {{ cor_card }}; border-color: {{ cor_texto }}; color: {{ cor_texto }}">
            <h3> IA: Chance de Chuva</h3>
            <div class="porcentagem">{{ "%.1f"|format(prob_chuva) }}%</div>
            <div style="font-weight: bold; font-size: 1.2em;">{{ msg_previsao }}</div><br>
            <small>
                <strong>MÃ©dias Usadas (60min):</strong><br>
                Temp: {{ "%.1f"|format(inputs_usados[0]) }}Â°C | 
                Umid: {{ "%.1f"|format(inputs_usados[1]) }}% <br> 
                Press: {{ "%.1f"|format(inputs_usados[2]) }} hPa |
                Vento: {{ "%.1f"|format(inputs_usados[3]) }} m/s
            </small>
        </div>


        <div class="card">
            <h3> Vento em {{ cidade }}</h3>
            <p>MÃ©dia dos Ãºltimos 60min:</p>
            <div style="font-size: 3em; font-weight: bold; color: #1565C0;">
                {{ "%.1f"|format(inputs_usados[3]) }} m/s
            </div>
            <small>Fonte: OpenWeatherMap (Integrado)</small>
        </div>

        <div class="card full-width">
            <h3> Tempo Real (Ãšltima Hora)</h3>
            <canvas id="grafico" height="80"></canvas>
        </div>
    </div>


    <div class="card full-width">
            <h3>ðŸ“‘ HistÃ³rico de MÃ©dias (Arquivadas)</h3>
            <table>
                <thead>
                    <tr>
                        <th>PerÃ­odo</th>
                        <th>Temp</th>
                        <th>PressÃ£o</th>
                        <th>Umid</th>
                        <th>Vento MÃ©dia</th> <th>Amostras</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in resumos %}
                    <tr>
                        <td>{{ r[1].split('T')[1][:5] }} - {{ r[2].split('T')[1][:5] }}</td>
                        <td>{{ "%.1f"|format(r[3]) }} Â°C</td>
                        <td>{{ "%.1f"|format(r[4]) }} hPa</td>
                        <td>{{ "%.1f"|format(r[5]) }} %</td>
                        <td>{{ "%.1f"|format(r[6]) }} m/s</td>
                        
                        <td><strong>{{ "%.1f"|format(r[7]) }} qnt</strong></td>
                        
                        <td>{{ r[8] }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    <!-- JS -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

</body>
</html>
